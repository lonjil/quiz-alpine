#!/bin/sh

# second-stage init. kernel filesystems and work overlay are up, hook it all
# up and get a shell

hostname quiz

# get modules into place. we do this at the top instead of in profile because
# we're pretty much always gonna need this
mount --bind /work/lib/modules /lib/modules

# if any profiles need work, boot them up
if [ -r /work/.quiz/init.profile ] ; then
  . /work/.quiz/init.profile
fi

# start a "real" init, and run our program
exec tini -vwsg /work/.quiz/run
